{
  "$schema": "https://vega.github.io/schema/vega/v5.json",
  "description": "2017 Other - Interactive globe of FoodValue.",
  "padding": 10,
  "width": 450,
  "height": 450,
  "autosize": "none",
  "signals": [
    {
      "name": "quakeSize",
      "value": 6,
      "bind": {
        "input": "range",
        "min": 0,
        "max": 12
      }
    },
    {
      "name": "rotate0",
      "value": 90,
      "bind": {
        "input": "range",
        "min": -180,
        "max": 180
      }
    },
    {
      "name": "rotate1",
      "value": -5,
      "bind": {
        "input": "range",
        "min": -180,
        "max": 180
      }
    }
  ],
  "data": [
    {
      "name": "sphere",
      "values": [
        {
          "type": "Sphere"
        }
      ]
    },
    {
      "name": "world",
      "url": "https://vega.github.io/vega-datasets/data/world-110m.json",
      "format": {
        "type": "topojson",
        "feature": "countries"
      }
    },
    {
      "name": "foodvalue",
      "values": {
        "type": "FeatureCollection",
        "features": [
          {
            "type": "Feature",
            "properties": {
              "value": 115.6,
              "country": "ARGENTINA"
            },
            "geometry": {
              "type": "Point",
              "coordinates": [
                -63.616672,
                -38.416097,
                0
              ]
            },
            "id": "0"
          },
          {
            "type": "Feature",
            "properties": {
              "value": 17.8,
              "country": "AUSTRALIA"
            },
            "geometry": {
              "type": "Point",
              "coordinates": [
                133.775136,
                -25.274398,
                0
              ]
            },
            "id": "1"
          },
          {
            "type": "Feature",
            "properties": {
              "value": 120.0,
              "country": "BRAZIL"
            },
            "geometry": {
              "type": "Point",
              "coordinates": [
                -51.92528,
                -14.235004,
                0
              ]
            },
            "id": "2"
          },
          {
            "type": "Feature",
            "properties": {
              "value": 1597.5,
              "country": "CANADA"
            },
            "geometry": {
              "type": "Point",
              "coordinates": [
                -106.346771,
                56.130366,
                0
              ]
            },
            "id": "3"
          },
          {
            "type": "Feature",
            "properties": {
              "value": 723.9,
              "country": "CHINA"
            },
            "geometry": {
              "type": "Point",
              "coordinates": [
                104.195397,
                35.86166,
                0
              ]
            },
            "id": "4"
          },
          {
            "type": "Feature",
            "properties": {
              "value": 309.20000000000005,
              "country": "FRANCE"
            },
            "geometry": {
              "type": "Point",
              "coordinates": [
                2.213749,
                46.227638,
                0
              ]
            },
            "id": "5"
          },
          {
            "type": "Feature",
            "properties": {
              "value": 237.3,
              "country": "GERMANY, FED. REPUBLIC"
            },
            "geometry": {
              "type": "Point",
              "coordinates": [
                13.405,
                52.52,
                0
              ]
            },
            "id": "6"
          },
          {
            "type": "Feature",
            "properties": {
              "value": 716.3,
              "country": "INDIA"
            },
            "geometry": {
              "type": "Point",
              "coordinates": [
                78.96288,
                20.593684,
                0
              ]
            },
            "id": "7"
          },
          {
            "type": "Feature",
            "properties": {
              "value": 2264.3,
              "country": "IRELAND"
            },
            "geometry": {
              "type": "Point",
              "coordinates": [
                -8.24389,
                53.41291,
                0
              ]
            },
            "id": "8"
          },
          {
            "type": "Feature",
            "properties": {
              "value": 358.1,
              "country": "ITALY"
            },
            "geometry": {
              "type": "Point",
              "coordinates": [
                12.56738,
                41.87194,
                0
              ]
            },
            "id": "9"
          },
          {
            "type": "Feature",
            "properties": {
              "value": 596.0,
              "country": "MEXICO"
            },
            "geometry": {
              "type": "Point",
              "coordinates": [
                -102.552784,
                23.634501,
                0
              ]
            },
            "id": "10"
          },
          {
            "type": "Feature",
            "properties": {
              "value": 30.8,
              "country": "NEW ZEALAND"
            },
            "geometry": {
              "type": "Point",
              "coordinates": [
                174.885971,
                -40.900557,
                0
              ]
            },
            "id": "11"
          },
          {
            "type": "Feature",
            "properties": {
              "value": 47.9,
              "country": "NORWAY"
            },
            "geometry": {
              "type": "Point",
              "coordinates": [
                8.468946,
                60.472024,
                0
              ]
            },
            "id": "12"
          },
          {
            "type": "Feature",
            "properties": {
              "value": 54.8,
              "country": "PERU"
            },
            "geometry": {
              "type": "Point",
              "coordinates": [
                -75.015152,
                -9.189967,
                0
              ]
            },
            "id": "13"
          },
          {
            "type": "Feature",
            "properties": {
              "value": 6.1,
              "country": "SINGAPORE"
            },
            "geometry": {
              "type": "Point",
              "coordinates": [
                103.819836,
                1.352083,
                0
              ]
            },
            "id": "14"
          },
          {
            "type": "Feature",
            "properties": {
              "value": 93.3,
              "country": "SOUTH KOREA"
            },
            "geometry": {
              "type": "Point",
              "coordinates": [
                127.766922,
                35.907757,
                0
              ]
            },
            "id": "15"
          },
          {
            "type": "Feature",
            "properties": {
              "value": 78.5,
              "country": "SPAIN"
            },
            "geometry": {
              "type": "Point",
              "coordinates": [
                -3.74922,
                40.463667,
                0
              ]
            },
            "id": "16"
          },
          {
            "type": "Feature",
            "properties": {
              "value": 255.9,
              "country": "THAILAND"
            },
            "geometry": {
              "type": "Point",
              "coordinates": [
                100.992541,
                15.870032,
                0
              ]
            },
            "id": "17"
          },
          {
            "type": "Feature",
            "properties": {
              "value": 0.0,
              "country": "URUGUAY"
            },
            "geometry": {
              "type": "Point",
              "coordinates": [
                -55.765835,
                -32.522779,
                0
              ]
            },
            "id": "18"
          }
        ]
      },
      "format": {
        "type": "json",
        "property": "features"
      }
    }
  ],
  "projections": [
    {
      "name": "projection",
      "scale": 225,
      "type": "orthographic",
      "translate": {
        "signal": "[width/2, height/2]"
      },
      "rotate": [
        {
          "signal": "rotate0"
        },
        {
          "signal": "rotate1"
        },
        0
      ]
    }
  ],
  "scales": [
    {
      "name": "size",
      "type": "sqrt",
      "domain": [
        0,
        802
      ],
      "range": [
        0,
        {
          "signal": "quakeSize"
        }
      ]
    }
  ],
  "marks": [
    {
      "type": "shape",
      "from": {
        "data": "sphere"
      },
      "encode": {
        "update": {
          "fill": {
            "value": "aliceblue"
          },
          "stroke": {
            "value": "black"
          },
          "strokeWidth": {
            "value": 1.5
          }
        }
      },
      "transform": [
        {
          "type": "geoshape",
          "projection": "projection"
        }
      ]
    },
    {
      "type": "shape",
      "from": {
        "data": "world"
      },
      "encode": {
        "update": {
          "fill": {
            "value": "mintcream"
          },
          "stroke": {
            "value": "black"
          },
          "strokeWidth": {
            "value": 0.35
          }
        }
      },
      "transform": [
        {
          "type": "geoshape",
          "projection": "projection"
        }
      ]
    },
    {
      "type": "shape",
      "from": {
        "data": "foodvalue"
      },
      "encode": {
        "update": {
          "opacity": {
            "value": 0.25
          },
          "fill": {
            "value": "red"
          },
          "tooltip": {
            "signal": "{'Country': datum.properties.country, 'Value': datum.properties.value, 'Category': 'Other'}"
          }
        }
      },
      "transform": [
        {
          "type": "geoshape",
          "projection": "projection",
          "pointRadius": {
            "expr": "scale('size', datum.properties.value)"
          }
        }
      ]
    }
  ]
}